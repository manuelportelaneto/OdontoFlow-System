{"version":3,"sources":["../../../../../nodes/Airtop/actions/interaction/scroll.operation.ts"],"sourcesContent":["import type {\n\tIDataObject,\n\tIExecuteFunctions,\n\tINodeExecutionData,\n\tINodeProperties,\n} from 'n8n-workflow';\n\nimport { constructInteractionRequest } from './helpers';\nimport {\n\tvalidateRequiredStringField,\n\tvalidateSessionAndWindowId,\n\tvalidateAirtopApiResponse,\n\tvalidateScrollByAmount,\n\tvalidateScrollingMode,\n} from '../../GenericFunctions';\nimport { apiRequest } from '../../transport';\n\nexport const description: INodeProperties[] = [\n\t{\n\t\tdisplayName: 'Scroll Mode',\n\t\tname: 'scrollingMode',\n\t\ttype: 'options',\n\t\tdescription: 'Choose the mode of scrolling',\n\t\toptions: [\n\t\t\t{\n\t\t\t\tname: 'Automatic',\n\t\t\t\tvalue: 'automatic',\n\t\t\t\tdescription: 'Describe with natural language the element to scroll to',\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'Manual',\n\t\t\t\tvalue: 'manual',\n\t\t\t\tdescription: 'Define the direction and amount to scroll by',\n\t\t\t},\n\t\t],\n\t\tdefault: 'automatic',\n\t\trequired: true,\n\t\tdisplayOptions: {\n\t\t\tshow: {\n\t\t\t\tresource: ['interaction'],\n\t\t\t\toperation: ['scroll'],\n\t\t\t},\n\t\t},\n\t},\n\t{\n\t\tdisplayName: 'Element Description',\n\t\tdefault: '',\n\t\tdescription: 'A natural language description of the element to scroll to',\n\t\tname: 'scrollToElement',\n\t\ttype: 'string',\n\t\tplaceholder: 'e.g. the page section titled \"Contact Us\"',\n\t\trequired: true,\n\t\tdisplayOptions: {\n\t\t\tshow: {\n\t\t\t\tresource: ['interaction'],\n\t\t\t\toperation: ['scroll'],\n\t\t\t\tscrollingMode: ['automatic'],\n\t\t\t},\n\t\t},\n\t},\n\t{\n\t\tdisplayName: 'Scroll To Page Edges',\n\t\tname: 'scrollToEdge',\n\t\ttype: 'fixedCollection',\n\t\tdefault: {},\n\t\tplaceholder: 'Add Edge Direction',\n\t\tdescription:\n\t\t\t\"The direction to scroll to. When 'Scroll By' is defined, 'Scroll To Edge' action will be executed first, then 'Scroll By' action.\",\n\t\tdisplayOptions: {\n\t\t\tshow: {\n\t\t\t\tresource: ['interaction'],\n\t\t\t\toperation: ['scroll'],\n\t\t\t\tscrollingMode: ['manual'],\n\t\t\t},\n\t\t},\n\t\toptions: [\n\t\t\t{\n\t\t\t\tdisplayName: 'Page Edges',\n\t\t\t\tname: 'edgeValues',\n\t\t\t\tvalues: [\n\t\t\t\t\t{\n\t\t\t\t\t\tdisplayName: 'Vertically',\n\t\t\t\t\t\tname: 'yAxis',\n\t\t\t\t\t\ttype: 'options',\n\t\t\t\t\t\tdefault: '',\n\t\t\t\t\t\toptions: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tname: 'Empty',\n\t\t\t\t\t\t\t\tvalue: '',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tname: 'Top',\n\t\t\t\t\t\t\t\tvalue: 'top',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tname: 'Bottom',\n\t\t\t\t\t\t\t\tvalue: 'bottom',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tdisplayName: 'Horizontally',\n\t\t\t\t\t\tname: 'xAxis',\n\t\t\t\t\t\ttype: 'options',\n\t\t\t\t\t\tdefault: '',\n\t\t\t\t\t\toptions: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tname: 'Empty',\n\t\t\t\t\t\t\t\tvalue: '',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tname: 'Left',\n\t\t\t\t\t\t\t\tvalue: 'left',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tname: 'Right',\n\t\t\t\t\t\t\t\tvalue: 'right',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t],\n\t},\n\t{\n\t\tdisplayName: 'Scroll By',\n\t\tname: 'scrollBy',\n\t\ttype: 'fixedCollection',\n\t\tdefault: {},\n\t\tdescription:\n\t\t\t\"The amount to scroll by. When 'Scroll To Edge' is defined, 'Scroll By' action will be executed after 'Scroll To Edge'.\",\n\t\tplaceholder: 'Add Scroll Amount',\n\t\tdisplayOptions: {\n\t\t\tshow: {\n\t\t\t\tresource: ['interaction'],\n\t\t\t\toperation: ['scroll'],\n\t\t\t\tscrollingMode: ['manual'],\n\t\t\t},\n\t\t},\n\t\toptions: [\n\t\t\t{\n\t\t\t\tname: 'scrollValues',\n\t\t\t\tdisplayName: 'Scroll Values',\n\t\t\t\tdescription: 'The amount in pixels or percentage to scroll by',\n\t\t\t\tvalues: [\n\t\t\t\t\t{\n\t\t\t\t\t\tdisplayName: 'Vertically',\n\t\t\t\t\t\tname: 'yAxis',\n\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\tdefault: '',\n\t\t\t\t\t\tplaceholder: 'e.g. 200px, 50%, -100px',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tdisplayName: 'Horizontally',\n\t\t\t\t\t\tname: 'xAxis',\n\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\tdefault: '',\n\t\t\t\t\t\tplaceholder: 'e.g. 50px, 10%, -200px',\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t],\n\t},\n\t{\n\t\tdisplayName: 'Scrollable Area',\n\t\tname: 'scrollWithin',\n\t\ttype: 'string',\n\t\tdefault: '',\n\t\tdescription: 'Scroll within an element on the page',\n\t\tplaceholder: 'e.g. the left sidebar',\n\t\tdisplayOptions: {\n\t\t\tshow: {\n\t\t\t\tresource: ['interaction'],\n\t\t\t\toperation: ['scroll'],\n\t\t\t\tscrollingMode: ['automatic'],\n\t\t\t},\n\t\t},\n\t},\n];\n\nexport async function execute(\n\tthis: IExecuteFunctions,\n\tindex: number,\n): Promise<INodeExecutionData[]> {\n\tconst { sessionId, windowId } = validateSessionAndWindowId.call(this, index);\n\n\tconst scrollingMode = validateScrollingMode.call(this, index);\n\tconst isAutomatic = scrollingMode === 'automatic';\n\n\tconst scrollToElement = isAutomatic\n\t\t? validateRequiredStringField.call(this, index, 'scrollToElement', 'Element Description')\n\t\t: '';\n\n\tconst scrollToEdge = this.getNodeParameter('scrollToEdge.edgeValues', index, {}) as {\n\t\txAxis?: string;\n\t\tyAxis?: string;\n\t};\n\n\tconst scrollBy = validateScrollByAmount.call(this, index, 'scrollBy.scrollValues');\n\n\tconst scrollWithin = this.getNodeParameter('scrollWithin', index, '') as string;\n\n\tconst request: IDataObject = {\n\t\t// when scrollingMode is 'Manual'\n\t\t...(!isAutomatic ? { scrollToEdge } : {}),\n\t\t...(!isAutomatic ? { scrollBy } : {}),\n\t\t// when scrollingMode is 'Automatic'\n\t\t...(isAutomatic ? { scrollToElement } : {}),\n\t\t...(isAutomatic ? { scrollWithin } : {}),\n\t};\n\n\tconst fullRequest = constructInteractionRequest.call(this, index, request);\n\n\tconst response = await apiRequest.call(\n\t\tthis,\n\t\t'POST',\n\t\t`/sessions/${sessionId}/windows/${windowId}/scroll`,\n\t\tfullRequest,\n\t);\n\n\tvalidateAirtopApiResponse(this.getNode(), response);\n\n\treturn this.helpers.returnJsonArray({ sessionId, windowId, ...response });\n}\n"],"mappings":"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","names":[]}